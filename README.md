# FILM!

Проект выполнен в рамках практической работы учебного курса Яндекс.Практикум. 
Представляет из себя онлайн-сервис бронирования билетов в кинотеатр. В рамках сервиса пользователь может: просмотреть список фильмов, ознакомиться с конкретным фильмом и его сеансами, посмотреть карту мест в зале, выбрать интересующие места и оформить заказ.

## В ходе работы над проектом были выполнены следующие задачи в бэкенд-части приложения:
1. :white_check_mark: Установлен Nest.js
2. :white_check_mark: К проекту подключен и настроен TypeORM для взаимодействия с Postgres
3. :white_check_mark: Созданы контроллеры и сервисы обработки запросов клиентной части
4. :white_check_mark: Создан репозиторий на базе БД Postgres
5. :white_check_mark: Реализован механизм бронирования билетов и обновления информации о свободных местах
6. :white_check_mark: Реализован модуль чтения настроек из переменных среды
7. :white_check_mark: Созданы логгеры DevLogger, JsonLogger и TSKVLogger, подключение осуществляется через переменные окружения ("json, tskv, dev")
8. :white_check_mark: Написаны тесты для проверки работы логгеров, контролеров и сервисов приложения:
* (запуск из `backend/` команда `npm run test`)
9. :white_check_mark: Приложение докеризировано, создан Github Action, который при новых коммитах собирает образы Docker и публикует их в GitHub Registry.
11. :white_check_mark: Настроен удаленный сервер, прикреплено доменное имя https://szimina.students.nomorepartiesco.ru/ и выполнен деплой проекта
12. :white_check_mark: Выпущен сертификат, настроено подключение к сайту по https и редирект с http на https

## Запуск в Docker (DB Postgresql)

В директориях:

`backend/`
Создайте `.env` файл из примера `.env.example`

`frontend/`
Создайте `.env` файл из примера `.env.example`

Установите зависимости в `FILM-REACT-NEST/backend/`, `FILM-REACT-NEST/frontend/`

`npm i`

Запуск Docker:

`docker compose up -d --build`

Через PGAdmin (http://localhost:8080/) авторизуйтесь, используя (email, password из .env `pgadmin/`).
Создайте сервер и настройте его Connection (Host, Maintenance database, Username, Password из .env `FILM-REACT-NEST/backend/`).
После наполните базу данными из директории проекта ``:

Приложение доступно на http://localhost/ 

## Установка локально

### Postgres
Установите СУБД PostgreSQL и запустить её (можно воспользоваться запуском СУБД в Docker). Подключившись от лица супер-пользователя postgres создайте отдельного пользователя.
Используйте заготовки запросов для заполнения СУБД тестовыми данными фильмов и заказов, эти запросы размещены в проекте:
`backend/test/prac.init.sql` — создаёт БД и таблицы
`backend/test/prac.films.sql` — заполняет таблицу фильмами
`backend/test/prac.shedules.sql` — заполняет таблицу расписанием сеансов

### Бэкенд

Перейдите в папку с исходным кодом бэкенда

`cd backend`

Установите зависимости

`npm i`

Создайте `.env` файл из примера `.env.example`.

Базы данных должны быть запущены.

Запустите бэкенд:

`npm run start:dev`

### Фронтенд

Перейдите в папку с исходным кодом фронтенд

`cd frontend`

Создайте `.env` файл из примера `.env.example`

Установите зависимости

`npm i`

Запустите фронтенд:

`npm run dev`

Приложение доступно на http://localhost:5173/ 





